# CSS中的代码规范

## css的代码规范远比我们想象中的重要
有很多前端对css的重视程度远没有js那么重要，包括曾经的我也是一样。实际上，在我们的日常开发中
在样式中调试的时间可能比你想象中的要多得多，甚至比js花的时间还要多。要在前端实现一些简单的功能，
很多的js库已经帮你实现好，包括一些常用的函数库等等。但样式不一样，对客户来说，样式甚至是一个网站的
核心，你永远无法用通用的样式满足不同的客户，在你被样式搞得焦头烂额之时，你可能会想过，如何才能使我们在
开发过程中减少写重复的样式呢？这也是本篇文章的主题，本文主要讲述[BEM规范](http://getbem.com/)以及css常用的代码结构。

## 代码规范即是约定成俗
举个:chestnut:, 早期人类在路上行走并没有规定大家要靠右，在路况变得复杂后，所有人都知道靠右行驶了。这就是约定俗称的东西，总不能
我喜欢靠左行驶你喜欢靠右行驶，当我们迎面行驶时，我让你还是你让我。。。  
因此在代码规范这件事情上，就是一个约定成俗的东西，就好比一些驼峰命名法之类的，并不是大家非要没事找事，只是这个东西它的确能给我们带来数不清的好处啊。

## 如何构建你的css
写css大概有这么几种：
1. 拿起就照着设计图去写，该要的样式一个个的写完，尽管写的过程中觉得写了很多的重复代码。
2. 先写一个通用的样式，用于重置浏览器默认样式，加一些预设类，用到啥直接引用，没有的再重新写样式。
3. 使用预处理器去写css，比如sass/scss，less，stylus等等，预处理器可以帮你做很多计算工作，并且通过其他可编程语法使你的css更加灵活，并且使用有意义的
命名方式，使代码看起来更加容易读懂。
4. css模块化，代码高度可复用，命名基于某个约定成俗的东西，来自于大厂流出来的规范，或者公司内部的开发规范等等，再团队其他成员参与时，能够轻松的读懂，并且能够
轻易地知道是干什么的。
基本上所有的前端工程师都会经历所有的以上情况，按从上到下的顺序。

这节着重讲一讲预设类:  
所谓的预设类就是，通过在全局css中写好一些通用的类样式比如下面的
``` css
/* css */
.left {
  float: left;
}
.clear::after {
  content: '';
  display: block;
  height: 0;
  clear: both;
}
```
``` html
<!-- html -->
<ul class="clear">
  <li class="left"></li>
</ul>
```
很显然，预设类给我们写样式带来了很多的方便，我们不用再写常用的样式了。如果我们对网站的定制化要求不高，
这无疑是一个很好的模式。  
但是通常情况下，这种预设类只能用来表示状态，行为，或者和组件捆绑一起，在定制化的网站中发挥的作用很小。
这是一个通用的构建模式，在其他的构建模式中，你也应该结合这种模式来使用，在大多数情况下，它会使你的开发变得轻松。

## BEM——块、元素、修饰符
BEM是一种流行的命名规范，将它和预设类以及预处理器结合起来使用，将会使你的项目变得异常容易维护，这一点都不夸张，试想一下
当你看了这个选择器的名字，你便知道是干嘛用的，处于哪个位置，表示什么状态，属于谁，一目了然。  
BEM——即**B**lock、**E**lement、**M**odifier，学习BEM规范就是弄清这三个玩意儿是干嘛用的，就像在js看到var let const开头的符号
你就知道这是用来申明的，你看见一个使用BEM的项目时，会豁然明白，啊，这个地方表示的是哪个模块，它的状态如何，它由哪些元素组成的。。。  
### Block 块
在我们抽象一个网站的布局时，会抽形成，头部，导航，侧栏，页脚，主体，栏目。。。然后一一想一个名字，header, nav, slide, footer, main, xx-section，
header下面可能还有个搜索栏，遂又命名为search。。。在BEM中block就是指的这些东西，但又不完全是，体现在以下几方面：
- block是完全独立的，不依赖于父级，哪怕是放在另外一个block中
- block只能用class表示
- 不能用id或者标签名表示一个块(id和标签都容易让html中的代码看不清层次和结构，id还因为不能重复的特性导致可复用性大大降低)  

我们可以把block看成一个具有一系列功能或者结构的完整体，比如search块，可以放在header中，可以放在footer中，可以放在侧栏中，它独立地表示一个搜索
功能它可以放在任何地方，因为它除了在html结构中存在嵌套关系外，就表示一个独立的功能体。就像你的手机一样，你把它带到哪里它还是你的手机。
``` html
<!-- 理论上你可以用任意标签作为一个block 只要具有这个块应该有的特性 -->
<header class="header"></header>
<div class="header"></div>
<span class="header"></span>
```
``` css
  .header {
    display: block;
    height: 48px;
    line-height: 48px;
    background: #fff;
    width: 90%;
  }
```
### Element 元素
还是拿手机来举例子，我们知道手机(block)也是由各种零件(***Element***)组成的，比如屏幕，电池，主板等等，他们依赖于
彼此，共同组成手机，单独拿出来没有任何意义。它和块最大的不同就是它依赖于块(Block)，理解这一点很重要，否则的话你很难决定
某个地方是使用block还是element，在这种情况下你会因为这种犹豫而降低你的开发效率
``` html
<header class="header">
  <!-- 依赖header块 -->
  <div class="header__logo"></div>

  <!-- menu是一个独立的整体 -->
  <ul class="menu">
    <li class="menu__item"></li>
    <!-- ... -->
  </ul>

  <!-- seach是一个独立的整体，以端划线链接的block、element、modifier更具有语义化 -->
  <div class="search-bar">
    <input type="text" class="search-bar__input" />
    <span class="search-bar__btn"></span>
    <!-- ... -->
  </div>
</header>
```
### Modifier 修饰符
还记得之前说过的预设类吗，通常表示状态或者行为的那个东东，修饰符差不多表示的就是那种东西。
官方推荐的规范是：  
block--modifier 或者 block__element--modifier，不过我觉得可以搞成两种模式，单纯的以'--'开头的表示全局修饰符
``` html
<div class="container --clear">
  <aside class="slide --left">
    <!-- ... -->
  </aside>
  <main class="main --right">
    <!-- ... -->
  </main>
</div>
```
``` css
.--clear::after {
  content: '';
  display: block;
  height: 0;
  clear: both;
}
.--left {
  float: left;
}
.--right {
  float: right;
}
```
::: tip 提示
不要单独使用修饰符，那会破坏整个BEM的结构，更推荐的做法是，加一个没有任何样式的block或者element表示其含义
:::

### 结合预处理器使用
使用BEM写样式固然增加了可读性，但是，那长长的类名让人有点望而却步，尽管他所带来的好处比你多敲一些键盘带来的坏处要多得多。
这个时候可以结合预处理器的嵌套和父类引用来做到写差不多的样式代码，带来更多的可读性。  
所有的预处理器大同小异，这里使用stylus来做演示
``` html
<!-- html代码 -->
<ul class="menu --clear">
  <li class="menu__item menu__item--hover"></li>
  <!-- ... -->
</ul>
```

``` stylus
.menu
  h = 48px
  width 400px
  &__item
    height h
    width 20%
    @extend .--left
    &--hover
      color #f00
      background #fff
```

## 格式
css的格式是老生常谈的东西了，几乎在任何的语言中，都会跟你强调，写出的代码要好看，要遵循各种各样的规矩等等。。。  
我觉得让人去记忆一种格式规范是痛苦的，就像你不喝酒，餐桌上的人都喝，就是要让你喝，不然就是不合群！所谓格式并不一定要求
你哪哪必须加一个空格这种非常细微的东西，举个:chestnut:  
``` css
.header{
  height:48px;
}
.header {
  height: 48px;
}
```
上面的两种写法的区别就是空格，这种有必要规范吗？没必要，规范格式更多地在于不应该去干嘛，而不是应该去干嘛，比如：
- 表示多个元素使用同一个样式，你不应该把这些选择器写在一行，因为这第一眼看上去很容易让人觉得是嵌套。
``` css
/* good */
.menu,
.header,
.slide {
  background: #f2f2f2;
}

/* not good */
.menu, .header, .slide {
  background: #f2f2f2;
}
```
- 尽可能少的使用 !important，它很可能会影响你的样式覆盖，在后期你意识到的时候也不好改动，因为你一旦去掉会使得你在其他使用到它的场景发生
权重错乱，导致整个css树崩塌

本章结束